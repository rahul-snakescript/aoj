{% extends  'aoj_app/demo/base.html' %}
{% load staticfiles i18n aoj_extras %}
{% load static %}

{% block page_title %}
{% get_site_config as config %}
{% if config.donate_seo_title %}
{{ config.donate_seo_title }}
{% else %}
The Arms of Jesus - Donate
{% endif %}
{% endblock page_title %}

{% block body_temp %}
{% get_site_config as config %}
<section class="child_banner" {% if config.donate_banner_image %}style="background-image:url({{ config.donate_banner_image.url }});"{% endif %}>
  {% get_desktop_nav %}
{% comment %} {% include 'aoj_app/demo/header.html' %} {% endcomment %}
<div class="container children_arm">
  <div class="row">
    <div class="col-md-12">
      <div class="banner_outer"> 
        <h1>YOU CAN SPONSOR A CHILD FOR $40.00 A MONTH OR $480 A YEAR... JUST $1.32 PER DAY</h1>
      </div>
    </div>
  </div>
</div>
</section>
  <div class="page-donate">
    <section class="mad">
      <h1>{% trans "Make a Donation" %}</h1>
    </section>
    <section class="pd-body">
      <div class="container">
        <div class="row donateOuter_row">
          <div class="col-lg-10 col-lg-offset-1">
            <h4 class="text-center">
              {% trans "To make a donation and receive a USA Charitable Donation Tax Receipt in USA Dollars, please" %}
              <a href="https://www.gifttool.com/donations/Donate?ID=2195&AID=3268">{% trans "click here" %}.</a>
            </h4>
            <br>
            <h4 class="text-center">â€‹
              {% blocktrans trimmed %}
                To make a donation and receive a Canadian<br> Charitable Donation Tax
                Receipt in Canadian Dollars, please use the form below.</h4>
              {% endblocktrans %}
            <h4>{% trans "Donor Information" %}</h4>
            <div class="row">
              <div class="col-sm-6">
                {% comment %} <form action="https://checkout.e-xact.com/payment" method="POST" id="form-donate"> {% endcomment %}
                  <form action="https://checkout.e-xact.com/payment" method="POST" id="form-donate">

                  {% csrf_token %}
                  <div class="form-group">
                    <label for="cbfEmail">{% trans "Email address" %}</label>
                    <input type="email" class="form-control" id="cbfEmail" name="x_email"
                           required="required" value="{{ latest_cr.email }}">
                  </div>

                  <div class="row">
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label for="cbfFname">{% trans "First Name" %}</label>
                        <input type="text" class="form-control" id="cbfFname"
                               required="required"
                               name="x_first_name" value="{{ latest_cr.first_name }}">
                      </div>
                    </div>
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label for="cbfLname">{% trans "Last Name" %}</label>
                        <input type="text" class="form-control" id="cbfLname"
                               required="required"
                               name="x_last_name" value="{{ latest_cr.last_name }}">
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="cbfAddress">{% trans "Address" %}</label>
                    <input type="text" class="form-control" id="cbfAddress" name="x_address"
                           required="required" value="{{ latest_cr.address }}">
                  </div>
                  <div class="form-group">
                    <label for="cbfCity">{% trans "City" %}</label>
                    <input type="text" class="form-control" id="cbfCity" name="x_city"
                           required="required" value="{{ latest_cr.city }}">
                  </div>

                  <div class="row">
                    <div class="col-sm-8">
                      <div class="form-group">
                        <label for="cbfState">{% trans "Province" %}</label>
                        <input type="text" class="form-control" id="cbfState" name="x_state"
                               required="required" value="{{ latest_cr.state }}">
                      </div>
                    </div>
                    <div class="col-sm-4">
                      <div class="form-group">
                        <label for="cbfZip">{% trans "Zip Code" %}</label>
                        <input type="text" class="form-control" id="cbfZip" name="x_zip"
                               required="required" value="{{ latest_cr.zip_code }}">
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="cbfCountry">{% trans "Country" %}</label>
                    <input type="text" class="form-control" id="cbfCountry" name="x_country"
                           required="required" value="{{ latest_cr.country }}">
                  </div>
                  <div class="form-group">
                    <label for="cbfPhone">{% trans "Phone Number" %}</label>
                    <input type="text" class="form-control" id="cbfPhone" name="x_phone"
                           required="required" value="{{ latest_cr.phone }}">
                  </div>
                  <div class="form-group">
                    <label for="cbfAmount">{% trans "Cash Donation" %}</label>
                    <select class="form-control" id="cbfAmount" required="required">
                      <option value="" disabled selected>Choose Amount</option>
                      <option value="25.00">$25</option>
                      <option value="50.00">$50</option>
                      <option value="100.00">$100</option>
                      <option value="250.00">$250</option>
                      <option value="350.00">$350</option>
                      <option value="500.00">$500</option>
                      <option value="750.00">$750</option>
                      <option value="1000.00">$1000</option>
                      <option value="1250.00">$1250</option>
                      <option value="1500.00">$1500</option>
                      <option value="1700.00">$1700</option>
                      <option value="2000.00">$2000</option>
                      <option value="5000.00">$5000</option>
                      <option value="10000.00">$10000</option>
                      <option value="40.00">$40 {% trans "Sponsor a Child for one month" %}</option>
                      <option value="480.00">$480 {% trans "Sponsor a Child for one year" %}</option>
                      <option value="other">{% trans "Other Amount" %}</option>
                    </select>
                  </div>
                  <div class="form-group oa">
                    <label for="cbfOA">{% trans "Amount" %}:</label>
                    <input type="text" class="form-control" id="cbfOA">
                  </div>
                  <div class="form-group">
                    <label for="cbfDescr">{% trans "Extra Details (e.g. name of a sponsored child)" %}</label>
                    <textarea name="x_description" class="form-control" id="cbfDescr" cols="30"
                              rows="10"></textarea>
                  </div>
                  <div class="checkbox latterUse">
                    <label>
                      <input type="checkbox" name="save_address"> {% trans "Save address for later use" %}
                    </label>
                  </div>

                  <input type="hidden" name="x_login" value="{{ x_login }}">
                  <input type="hidden" name="x_fp_sequence" value="{{ x_fp_sequence }}">
                  <input type="hidden" name="x_fp_timestamp" value="">
                  <input type="hidden" name="x_amount" value="{{ x_amount }}">
                  <input type="hidden" name="x_currency_code" value="{{ x_currency_code }}">
                  <input type="hidden" name="x_fp_hash" value="">
                  <input type="hidden" name="x_show_form" value="{{ x_show_form }}">
                  <input type="hidden" name="x_email_customer" value="{{ x_email_customer }}">

                  <input type="submit" class="btn btn-aoj" value="SUBMIT">
                </form>
              </div>
              <div class="col-sm-6 text-center right_imgOuter">
                <img class="img-responsive" style="margin: 0 auto 30px;"
                     src="{% static 'img/donate-i1.jpg' %}" alt="">
                <img class="img-responsive" style="margin: 0 auto;"
                     src="{% static 'img/donate-i2.png' %}" alt="">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
<script src="{% static 'lib/jquery/jquery-3.1.1.min.js' %}"></script>
<script src="{% static 'lib/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'lib/fancybox/jquery.fancybox.pack.js' %}"></script>
<script src="{% static 'lib/jquery-validate/jquery.validate.min.js' %}"></script>
<script src="{% static 'lib/mmenu/jquery.mmenu.all.min.js' %}"></script>
<script src="{% static 'lib/slidesjs/jquery.slides.min.js' %}"></script>
<script src="{% static 'js/translate.js' %}"></script>
<script src="{% static 'js/site.js' %}"></script>
<script src="//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=190291501407"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script src="//translate.google.com/translate_a/element.js?cb=TranslateInit"></script>
  <script>
    // CALCULATE X_FP_HASH FOR THE DONATE FORM
    $('#cbfAmount').change(function () {
      if ($(this).val() != 'other') {
          $('.oa').slideUp();
          $('#cbfOA').prop('required', false);
          $('input[name="x_amount"]').val($(this).val());
          calculate_fp_hash();
      } else {
          $('#cbfOA').val($('input[name="x_amount"]').val());
          $('.oa').slideDown();
          $('#cbfOA').prop('required', true);
      }
  });

  $('#cbfOA').change(function () {
      $('input[name="x_amount"]').val($(this).val());
      calculate_fp_hash();
  });

  function calculate_fp_hash() {
      ajax_loading_modal(true);
      var x_login = $('#form-donate').find('input[name="x_login"]').val();
      var x_fp_sequence = $('#form-donate').find('input[name="x_fp_sequence"]').val();
      var x_amount = $('#form-donate').find('input[name="x_amount"]').val();
      var x_currency_code = $('#form-donate').find('input[name="x_currency_code"]').val();
      $.get('/api/calculate_fp_hash/',
          {
              x_login: x_login, x_fp_sequence: x_fp_sequence, x_amount: x_amount,
              x_currency_code: x_currency_code
          },
          function (e) {
              if (e['error'] === 0) {
                  $('#form-donate').find('input[name="x_amount"]').val(e['x_amount']);
                  $('#form-donate').find('input[name="x_fp_hash"]').val(e['x_fp_hash']);
              }
          }).always(function (e) {
          ajax_loading_modal(false);
      });
  }

// SEND EMAIL BEFORE SUBMIT DONATE FORM
  $('#form-donate').submit(function (e) {
      $('#form-donate input[type="submit"]').attr('disabled', 'disabled');
      $.ajax({
          method: "POST",
          url: "/api/send_donate_form/",
          data: $('#form-donate').serialize(),
          async: false,
          timeout: 30000,
      }).done(function (data) {
          $('#form-donate input[name="x_fp_timestamp"]').val(data["x_fp_timestamp"]);
          $('#form-donate input[name="x_fp_hash"]').val(data["x_fp_hash"]);
          return true;
      }).fail(function () {
          return false;
      });
  });


  </script>

{% endblock %}